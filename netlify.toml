# This file is in the repository root
[build]
  base = "SoWhatAI"
  command = "npm install && npm run build"
  publish = "dist"

[functions]
  directory = "netlify/functions"
  node_bundler = "esbuild"

[functions."wcag-scan"]
  external_node_modules = ["playwright-core", "@sparticuz/chromium", "axe-core"]

[functions."run-wcag-scan"]
  external_node_modules = ["playwright-core", "@sparticuz/chromium", "axe-core", "@netlify/blobs"]

[functions."run-wcag-scan-background"]
  external_node_modules = ["playwright-core", "@sparticuz/chromium", "axe-core", "@netlify/blobs"]

[functions."start-wcag-scan"]
  external_node_modules = ["@netlify/blobs"]

[functions."wcag-scan-status"]
  external_node_modules = ["@netlify/blobs"]

[functions."wcag-only"]
  external_node_modules = ["@netlify/blobs"]

[[redirects]]
  from = "/wcag-scan"
  to = "/index.html"
  status = 200
